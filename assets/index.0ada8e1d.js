import{$ as Y,a as Ce,g as Te,b as z,c as X,u as we,i as h,d as k,t as A,e as M,f as Q,m as Qe,h as Me,j as q,k as N,l as R,o as Z,n as se,p as Pe,q as he,s as je,r as ne,F as Ne,S as de,v as Ze,w as U,x as W,y as et,z as ae,_ as te,A as Re,B as tt,C as ue,D as rt,E as nt,T as at}from"./index.e65d7ba3.js";import{F as Le}from"./Favicon.bc1ca08e.js";import{C as B,o as ot,T as H,V as st,k as lt,a as it}from"./index.104056db.js";import{n as ct}from"./url.624aedf1.js";import"./BareClient.06787bc0.js";const ye=Symbol("store-raw"),le=Symbol("store-node"),dt=Symbol("store-name");function Be(e,r){let t=e[Y];if(!t&&(Object.defineProperty(e,Y,{value:t=new Proxy(e,gt)}),!Array.isArray(e))){const n=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let o=0,i=n.length;o<i;o++){const l=n[o];a[l].get&&Object.defineProperty(e,l,{enumerable:a[l].enumerable,get:a[l].get.bind(t)})}}return t}function fe(e){let r;return e!=null&&typeof e=="object"&&(e[Y]||!(r=Object.getPrototypeOf(e))||r===Object.prototype||Array.isArray(e))}function ie(e,r=new Set){let t,n,a,o;if(t=e!=null&&e[ye])return t;if(!fe(e)||r.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):r.add(e);for(let i=0,l=e.length;i<l;i++)a=e[i],(n=ie(a,r))!==a&&(e[i]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):r.add(e);const i=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let c=0,$=i.length;c<$;c++)o=i[c],!l[o].get&&(a=e[o],(n=ie(a,r))!==a&&(e[o]=n))}return e}function $e(e){let r=e[le];return r||Object.defineProperty(e,le,{value:r={}}),r}function xe(e,r,t){return e[r]||(e[r]=He(t))}function ut(e,r){const t=Reflect.getOwnPropertyDescriptor(e,r);return!t||t.get||!t.configurable||r===Y||r===le||r===dt||(delete t.value,delete t.writable,t.get=()=>e[Y][r]),t}function Ve(e){if(Te()){const r=$e(e);(r._||(r._=He()))()}}function ft(e){return Ve(e),Reflect.ownKeys(e)}function He(e){const[r,t]=X(e,{equals:!1,internal:!0});return r.$=t,r}const gt={get(e,r,t){if(r===ye)return e;if(r===Y)return t;if(r===Ce)return Ve(e),t;const n=$e(e),a=n.hasOwnProperty(r);let o=a?n[r]():e[r];if(r===le||r==="__proto__")return o;if(!a){const i=Object.getOwnPropertyDescriptor(e,r);Te()&&(typeof o!="function"||e.hasOwnProperty(r))&&!(i&&i.get)&&(o=xe(n,r,o)())}return fe(o)?Be(o):o},has(e,r){return r===ye||r===Y||r===Ce||r===le||r==="__proto__"?!0:(this.get(e,r,e),r in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ft,getOwnPropertyDescriptor:ut};function ge(e,r,t,n=!1){if(!n&&e[r]===t)return;const a=e[r],o=e.length;t===void 0?delete e[r]:e[r]=t;let i=$e(e),l;(l=xe(i,r,a))&&l.$(()=>t),Array.isArray(e)&&e.length!==o&&(l=xe(i,"length",o))&&l.$(e.length),(l=i._)&&l.$()}function ze(e,r){const t=Object.keys(r);for(let n=0;n<t.length;n+=1){const a=t[n];ge(e,a,r[a])}}function bt(e,r){if(typeof r=="function"&&(r=r(e)),r=ie(r),Array.isArray(r)){if(e===r)return;let t=0,n=r.length;for(;t<n;t++){const a=r[t];e[t]!==a&&ge(e,t,a)}ge(e,"length",n)}else ze(e,r)}function re(e,r,t=[]){let n,a=e;if(r.length>1){n=r.shift();const i=typeof n,l=Array.isArray(e);if(Array.isArray(n)){for(let c=0;c<n.length;c++)re(e,[n[c]].concat(r),t);return}else if(l&&i==="function"){for(let c=0;c<e.length;c++)n(e[c],c)&&re(e,[c].concat(r),t);return}else if(l&&i==="object"){const{from:c=0,to:$=e.length-1,by:x=1}=n;for(let d=c;d<=$;d+=x)re(e,[d].concat(r),t);return}else if(r.length>1){re(e[n],r,[n].concat(t));return}a=e[n],t=[n].concat(t)}let o=r[0];typeof o=="function"&&(o=o(a,t),o===a)||n===void 0&&o==null||(o=ie(o),n===void 0||fe(a)&&fe(o)&&!Array.isArray(o)?ze(a,o):ge(e,n,o))}function Ke(...[e,r]){const t=ie(e||{}),n=Array.isArray(t),a=Be(t);function o(...i){z(()=>{n&&i.length===1?bt(t,i[0]):re(t,i)})}return[a,o]}const vt=A('<div class="toolbarbutton-1 flex h-6 cursor-default select-none items-center gap-1 rounded px-1"><div class="h-[15px] w-[15px]"></div></div>');function pt(e){const{sortable:r,bookmark:t}=e;function n(a){/^javascript:/.test(t.url)?M().executeScript(decodeURIComponent(t.url.replace(/^javascript:/,""))):a.ctrlKey?new H(t.url,!1):M().navigate(t.url)}return(()=>{const a=vt.cloneNode(!0),o=a.firstChild;return a.$$contextmenu=i=>{i.data=[new B({text:"Open in new tab",onClick:()=>{ot(i,t.url,!1,!0)}}),new B({separator:!0}),new B({text:"Delete",onClick:()=>{t.delete()}}),new B({separator:!0})]},a.$$click=n,we(r,a,()=>!0),h(o,k(Le,{get src(){return X(t.icon)[0]}})),h(a,()=>t.name,null),a})()}Q(["click","contextmenu"]);var be=class{x;y;width;height;constructor(e){this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},oe=e=>{let r=new be(e.getBoundingClientRect());const{transform:t}=getComputedStyle(e);return t&&(r=mt(r,t)),r},mt=(e,r)=>{let t,n;if(r.startsWith("matrix3d(")){const a=r.slice(9,-1).split(/, /);t=+a[12],n=+a[13]}else if(r.startsWith("matrix(")){const a=r.slice(7,-1).split(/, /);t=+a[4],n=+a[5]}else t=0,n=0;return new be({...e,x:e.x-t,y:e.y-n})},V=()=>({x:0,y:0}),_e=(e,r)=>e.x===r.x&&e.y===r.y,pe=(e,r)=>new be({...e,x:e.x+r.x,y:e.y+r.y}),ht=(e,r)=>Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)),yt=(e,r)=>{const t=Math.max(e.top,r.top),n=Math.max(e.left,r.left),a=Math.min(e.right,r.right),o=Math.min(e.bottom,r.bottom),i=a-n,l=o-t;if(n<a&&t<o){const c=e.width*e.height,$=r.width*r.height,x=i*l;return x/(c+$-x)}return 0},me=(e,r)=>e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height,Fe=(e,r,t)=>{const n=e.transformed.center,a={distance:1/0,droppable:null};for(const o of r){const i=ht(n,o.layout.center);i<a.distance?(a.distance=i,a.droppable=o):i===a.distance&&o.id===t.activeDroppableId&&(a.droppable=o)}return a.droppable},xt=(e,r,t)=>{const n=e.transformed,a={ratio:0,droppable:null};for(const o of r){const i=yt(n,o.layout);i>a.ratio?(a.ratio=i,a.droppable=o):i>0&&i===a.ratio&&o.id===t.activeDroppableId&&(a.droppable=o)}return a.droppable},Ue=Pe(),We=e=>{const r=Qe({collisionDetector:xt},e),[t,n]=Ke({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return t.active.draggableId!==null?t.draggables[t.active.draggableId]:null},droppableId:null,get droppable(){return t.active.droppableId!==null?t.droppables[t.active.droppableId]:null},sensorId:null,get sensor(){return t.active.sensorId!==null?t.sensors[t.active.sensorId]:null},overlay:null}}),a=(s,u,b)=>{s.substring(0,s.length-1),R(()=>t[s][u])&&n(s,u,"transformers",b.id,b)},o=(s,u,b)=>{s.substring(0,s.length-1),R(()=>t[s][u])&&(!R(()=>t[s][u].transformers[b])||n(s,u,"transformers",b,void 0))},i=({id:s,node:u,layout:b,data:O})=>{const y=t.draggables[s],m={id:s,node:u,layout:b,data:O,_pendingCleanup:!1};let D;if(!y)Object.defineProperties(m,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(t.active.overlay)return V();const P=Object.values(t.draggables[s].transformers);return P.sort((L,G)=>L.order-G.order),P.reduce((L,G)=>G.callback(L),V())}},transformed:{enumerable:!0,configurable:!0,get:()=>pe(t.draggables[s].layout,t.draggables[s].transform)}});else if(t.active.draggableId===s&&!t.active.overlay){const P={x:y.layout.x-b.x,y:y.layout.y-b.y},L="addDraggable-existing-offset",G=y.transformers[L],De=G?G.callback(P):P;D={id:L,order:100,callback:Se=>({x:Se.x+De.x,y:Se.y+De.y})},F(()=>o("draggables",s,L))}z(()=>{n("draggables",s,m),D&&a("draggables",s,D)}),t.active.draggable&&p()},l=s=>{!R(()=>t.draggables[s])||(n("draggables",s,"_pendingCleanup",!0),queueMicrotask(()=>c(s)))},c=s=>{if(t.draggables[s]?._pendingCleanup){const u=t.active.draggableId===s;z(()=>{u&&n("active","draggableId",null),n("draggables",s,void 0)})}},$=({id:s,node:u,layout:b,data:O})=>{const y=t.droppables[s],m={id:s,node:u,layout:b,data:O,_pendingCleanup:!1};y||Object.defineProperties(m,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const D=Object.values(t.droppables[s].transformers);return D.sort((P,L)=>P.order-L.order),D.reduce((P,L)=>L.callback(P),V())}},transformed:{enumerable:!0,configurable:!0,get:()=>pe(t.droppables[s].layout,t.droppables[s].transform)}}),n("droppables",s,m),t.active.draggable&&p()},x=s=>{!R(()=>t.droppables[s])||(n("droppables",s,"_pendingCleanup",!0),queueMicrotask(()=>d(s)))},d=s=>{if(t.droppables[s]?._pendingCleanup){const u=t.active.droppableId===s;z(()=>{u&&n("active","droppableId",null),n("droppables",s,void 0)})}},f=({id:s,activators:u})=>{n("sensors",s,{id:s,activators:u,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:t.sensors[s].coordinates.current.x-t.sensors[s].coordinates.origin.x,y:t.sensors[s].coordinates.current.y-t.sensors[s].coordinates.origin.y}}}})},v=s=>{if(!R(()=>t.sensors[s]))return;const u=t.active.sensorId===s;z(()=>{u&&n("active","sensorId",null),n("sensors",s,void 0)})},g=({node:s,layout:u})=>{const b=t.active.overlay,O={node:s,layout:u};b||Object.defineProperties(O,{id:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(t.active.draggable?t.active.draggable.transformers:{}).filter(([y])=>y!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const y=Object.values(t.active.overlay?t.active.overlay.transformers:[]);return y.sort((m,D)=>m.order-D.order),y.reduce((m,D)=>D.callback(m),V())}},transformed:{enumerable:!0,configurable:!0,get:()=>t.active.overlay?pe(t.active.overlay.layout,t.active.overlay.transform):new be({x:0,y:0,width:0,height:0})}}),n("active","overlay",O)},E=()=>n("active","overlay",null),w=(s,u)=>{z(()=>{n("sensors",s,"coordinates",{origin:{...u},current:{...u}}),n("active","sensorId",s)})},S=s=>{const u=t.active.sensorId;!u||n("sensors",u,"coordinates","current",{...s})},j=()=>n("active","sensorId",null),_=(s,u)=>{const b={};for(const y of Object.values(t.sensors))if(y)for(const[m,D]of Object.entries(y.activators))b[m]??=[],b[m].push({sensor:y,activator:D});const O={};for(const y in b){let m=y;u&&(m=`on${y}`),O[m]=D=>{for(const{activator:P}of b[y]){if(t.active.sensor)break;P(D,s)}}}return O},p=()=>{let s=!1;const u=Object.values(t.draggables),b=Object.values(t.droppables),O=t.active.overlay;return z(()=>{const y=new WeakMap;for(const m of u)if(m){const D=m.layout;y.has(m.node)||y.set(m.node,oe(m.node));const P=y.get(m.node);me(D,P)||(n("draggables",m.id,"layout",P),s=!0)}for(const m of b)if(m){const D=m.layout;y.has(m.node)||y.set(m.node,oe(m.node));const P=y.get(m.node);me(D,P)||(n("droppables",m.id,"layout",P),s=!0)}if(O){const m=O.layout,D=oe(O.node);me(m,D)||(n("active","overlay","layout",D),s=!0)}}),s},I=()=>{const s=t.active.overlay??t.active.draggable;if(s){const u=r.collisionDetector(s,Object.values(t.droppables),{activeDroppableId:t.active.droppableId}),b=u?u.id:null;t.active.droppableId!==b&&n("active","droppableId",b)}},C=s=>{const u={id:"sensorMove",order:0,callback:b=>t.active.sensor?{x:b.x+t.active.sensor.coordinates.delta.x,y:b.y+t.active.sensor.coordinates.delta.y}:b};p(),z(()=>{n("active","draggableId",s),a("draggables",s,u)}),I()},T=()=>{const s=R(()=>t.active.draggableId);z(()=>{s!==null&&o("draggables",s,"sensorMove"),n("active",["draggableId","droppableId"],null)}),p()},K=s=>{N(()=>{const u=t.active.draggable;u&&R(()=>s({draggable:u}))})},J=s=>{N(()=>{const u=t.active.draggable;if(u){const b=R(()=>t.active.overlay);Object.values(b?b.transform:u.transform),R(()=>s({draggable:u,overlay:b}))}})},ce=s=>{N(()=>{const u=t.active.draggable,b=t.active.droppable;u&&R(()=>s({draggable:u,droppable:b,overlay:t.active.overlay}))})},F=s=>{N(({previousDraggable:u,previousDroppable:b,previousOverlay:O})=>{const y=t.active.draggable,m=y?t.active.droppable:null,D=y?t.active.overlay:null;return!y&&u&&R(()=>s({draggable:u,droppable:b,overlay:O})),{previousDraggable:y,previousDroppable:m,previousOverlay:D}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};J(()=>I()),r.onDragStart&&K(r.onDragStart),r.onDragMove&&J(r.onDragMove),r.onDragOver&&ce(r.onDragOver),r.onDragEnd&&F(r.onDragEnd);const ve=[t,{addTransformer:a,removeTransformer:o,addDraggable:i,removeDraggable:l,addDroppable:$,removeDroppable:x,addSensor:f,removeSensor:v,setOverlay:g,clearOverlay:E,recomputeLayouts:p,detectCollisions:I,draggableActivators:_,sensorStart:w,sensorMove:S,sensorEnd:j,dragStart:C,dragEnd:T,onDragStart:K,onDragMove:J,onDragOver:ce,onDragEnd:F}];return k(Ue.Provider,{value:ve,get children(){return r.children}})},ee=()=>Me(Ue)||null,wt=(e="pointer-sensor")=>{const[r,{addSensor:t,removeSensor:n,sensorStart:a,sensorMove:o,sensorEnd:i,dragStart:l,dragEnd:c}]=ee(),$=250,x=10;Z(()=>{t({id:e,activators:{pointerdown:E}})}),se(()=>{n(e)});const d=()=>r.active.sensorId===e,f={x:0,y:0};let v=null,g=null;const E=(I,C)=>{I.button===0&&(document.addEventListener("pointermove",j),document.addEventListener("pointerup",_),g=C,f.x=I.clientX,f.y=I.clientY,v=window.setTimeout(S,$))},w=()=>{v&&(clearTimeout(v),v=null),document.removeEventListener("pointermove",j),document.removeEventListener("pointerup",_),document.removeEventListener("selectionchange",p)},S=()=>{r.active.sensor?d()||w():(a(e,f),l(g),p(),document.addEventListener("selectionchange",p))},j=I=>{const C={x:I.clientX,y:I.clientY};if(!r.active.sensor){const T={x:C.x-f.x,y:C.y-f.y};Math.sqrt(T.x**2+T.y**2)>x&&S()}d()&&(I.preventDefault(),o(C))},_=I=>{w(),d()&&(I.preventDefault(),c(),i())},p=()=>{window.getSelection()?.removeAllRanges()}},qe=e=>(wt(),q(()=>e.children)),ke=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),$t=(e,r={})=>{const[t,{addDraggable:n,removeDraggable:a,draggableActivators:o}]=ee(),[i,l]=X(null);Z(()=>{const d=i();d&&n({id:e,node:d,layout:oe(d),data:r})}),se(()=>a(e));const c=()=>t.active.draggableId===e,$=()=>t.draggables[e]?.transform||V();return Object.defineProperties((d,f)=>{const v=f?f():{};N(()=>{const g=i(),E=o(e);if(g)for(const w in E)g.addEventListener(w,E[w]);se(()=>{if(g)for(const w in E)g.removeEventListener(w,E[w])})}),l(d),v.skipTransform||N(()=>{const g=$();if(_e(g,V()))d.style.removeProperty("transform");else{const E=ke($());d.style.setProperty("transform",E.transform??null)}})},{ref:{enumerable:!0,value:l},isActiveDraggable:{enumerable:!0,get:c},dragActivators:{enumerable:!0,get:()=>o(e,!0)},transform:{enumerable:!0,get:$}})},_t=(e,r={})=>{const[t,{addDroppable:n,removeDroppable:a}]=ee(),[o,i]=X(null);Z(()=>{const x=o();x&&n({id:e,node:x,layout:oe(x),data:r})}),se(()=>a(e));const l=()=>t.active.droppableId===e,c=()=>t.droppables[e]?.transform||V();return Object.defineProperties((x,d)=>{const f=d?d():{};i(x),f.skipTransform||N(()=>{const v=c();if(_e(v,V()))x.style.removeProperty("transform");else{const g=ke(c());x.style.setProperty("transform",g.transform??null)}})},{ref:{enumerable:!0,value:i},isActiveDroppable:{enumerable:!0,get:l},transform:{enumerable:!0,get:c}})},kt=(e,r,t)=>{const n=e.slice();return n.splice(t,0,...n.splice(r,1)),n},Ye=Pe(),Xe=e=>{const[r]=ee(),[t,n]=Ke({initialIds:[],sortedIds:[]}),a=l=>l>=0&&l<t.initialIds.length;N(()=>{n("initialIds",[...e.ids]),n("sortedIds",[...e.ids])}),N(()=>{r.active.draggableId&&r.active.droppableId?R(()=>{const l=t.sortedIds.indexOf(r.active.draggableId),c=t.initialIds.indexOf(r.active.droppableId);if(!a(l)||!a(c))n("sortedIds",[...e.ids]);else if(l!==c){const $=kt(t.sortedIds,l,c);n("sortedIds",$)}}):n("sortedIds",[...e.ids])});const i=[t,{}];return k(Ye.Provider,{value:i,get children(){return e.children}})},It=()=>Me(Ye)||null,Dt=(e,r)=>t=>{e(t),r(t)},Je=(e,r={})=>{const[t,{addTransformer:n,removeTransformer:a}]=ee(),[o]=It(),i=$t(e,r),l=_t(e,r),c=Dt(i.ref,l.ref),$=()=>o.initialIds.indexOf(e),x=()=>o.sortedIds.indexOf(e),d=w=>t.droppables[w]?.layout||null,f=()=>{const w=V(),S=$(),j=x();if(j!==S){const _=d(e),p=d(o.initialIds[j]);_&&p&&(w.x=p.x-_.x,w.y=p.y-_.y)}return w},v={id:"sortableOffset",order:100,callback:w=>{const S=f();return{x:w.x+S.x,y:w.y+S.y}}};Z(()=>n("droppables",e,v)),se(()=>a("droppables",e,v.id));const g=()=>(e===t.active.draggableId&&!t.active.overlay?t.draggables[e]?.transform:t.droppables[e]?.transform)||V();return Object.defineProperties(w=>{i(w,()=>({skipTransform:!0})),l(w,()=>({skipTransform:!0})),N(()=>{const S=g();if(_e(S,V()))w.style.removeProperty("transform");else{const j=ke(g());w.style.setProperty("transform",j.transform??null)}})},{ref:{enumerable:!0,value:c},transform:{enumerable:!0,get:g},isActiveDraggable:{enumerable:!0,get:()=>i.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>i.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>l.isActiveDroppable}})};function Ge(){const[,{onDragStart:e,onDragEnd:r,addTransformer:t,removeTransformer:n}]=ee(),a={id:"constrain-y-axis",order:100,callback:o=>({...o,y:0})};return e(({draggable:o})=>{t("draggables",o.id,a)}),r(({draggable:o})=>{n("draggables",o.id,a.id)}),[]}const St=A('<div id="PersonalToolbar" class="flex h-7 w-full items-center gap-2 px-2 text-[11px]"></div>');function Ct(){const e=({draggable:t,droppable:n})=>{if(t.node.classList.remove("z-20"),t&&n){const a=ne(),o=a.findIndex(l=>l.id===t.id),i=a.findIndex(l=>l.id===n.id);if(o!==i){const l=a.slice();l.splice(i,0,...l.splice(o,1)),Ze(l)}}},r=({draggable:t})=>t.node.classList.add("z-20");return k(de,{get when(){return he()},get children(){const t=St.cloneNode(!0);return t.$$contextmenu=n=>{n.data||(n.data=[]),n.data.push(new B({text:"Hide bookmarks",onClick:()=>{je(!1)}}))},h(t,k(We,{onDragEnd:e,onDragStart:r,collisionDetector:Fe,get children(){return[k(Ge,{}),k(qe,{}),k(Xe,{get ids(){return ne().map(n=>n.id)},get children(){return k(Ne,{get each(){return ne()},children:n=>{const a=Je(n.id);return k(pt,{sortable:a,bookmark:n})}})}})]}})),t}})}Q(["contextmenu"]);const Ot=A('<div class="h-4 w-4 overflow-hidden"><div id="tab-throbber" class="h-4 w-[960px]"></div></div>'),At=A("<div></div>"),Et=A('<i class="fa-regular fa-volume mt-[2px] text-[10px]"></i>'),Tt=A('<div id="tab-background"><div class="h-4 w-4"></div><div><p class="w-full text-clip whitespace-nowrap text-xs font-light" style="-webkit-mask-image: linear-gradient(90deg, #000 0%, #000 calc(100% - 24px), transparent);mask-image: linear-gradient(90deg, #000 0%, #000 calc(100% - 24px), transparent);"></p></div><div><i class="fa-light fa-xmark mt-[2px] text-[10px]"></i></div></div>');function Mt(e){const{sortable:r}=e;return(()=>{const t=Tt.cloneNode(!0),n=t.firstChild,a=n.nextSibling,o=a.firstChild,i=a.nextSibling;return t.$$contextmenu=l=>{l.data=[new B({text:"New tab",onClick:()=>{new H("about:newTab",!0)}}),new B({separator:!0}),new B({text:"Reload",onClick:()=>{e.tab.reload()}}),new B({text:"Duplicate",onClick:()=>{new H(e.tab.url(),!0)}}),new B({separator:!0}),new B({text:"Close",onClick:()=>{e.tab.close()}})]},t.$$mousedown=l=>{l.button===0&&(e.tab.focus=!0)},we(r,t,()=>!0),h(n,k(de,{get when(){return e.tab.loading()},get children(){return Ot.cloneNode(!0)}}),null),h(n,k(de,{get when(){return!e.tab.loading()},get children(){const l=At.cloneNode(!0);return h(l,k(Le,{get src(){return e.tab.icon}})),U(()=>W(l,`h-full w-full ${e.tab.small()&&e.tab.focus()?"hidden":""}`)),l}}),null),h(t,k(de,{get when(){return e.tab.playing()},get children(){return Et.cloneNode(!0)}}),a),h(o,()=>e.tab.title()),i.$$mousedown=l=>l.stopPropagation(),et(i,"click",e.tab.close.bind(e.tab),!0),U(l=>{const c=`h-9 ${e.tab.pinned()||e.tab.small()?"":"w-48"} shadow-inner-lg  flex items-center gap-[5px] overflow-hidden rounded p-2 pr-1 text-sm`,$=e.tab.focus(),x=`flex-1 overflow-hidden ${e.tab.small()||e.tab.pinned()?"hidden":""}`,d=`close-icon flex h-6 w-6 items-center justify-center rounded hover:bg-opacity-50 ${e.tab.small()&&!e.tab.focus()||e.tab.pinned()?"hidden":""}`;return c!==l._v$&&W(t,l._v$=c),$!==l._v$2&&ae(t,"data-active",l._v$2=$),x!==l._v$3&&W(a,l._v$3=x),d!==l._v$4&&W(i,l._v$4=d),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()}Q(["mousedown","contextmenu","click"]);const Pt=A('<div class="flex" id="tabs" style="width: env(titlebar-area-width, 100%); min-height: env(titlebar-area-height, auto);margin-left: env(titlebar-area-x, 0);"><div class="flex h-11 w-full cursor-default  select-none items-center gap-1 overflow-hidden px-[2px]"><div class="flex items-center justify-center" id="opentab"><div class="toolbarbutton-1 flex h-9 w-9 items-center justify-center rounded"><i class="fa-regular fa-plus mt-[2px] text-xs"></i></div></div></div></div>');function jt(){const e=({draggable:n,droppable:a})=>{if(n.node.classList.remove("z-20"),n&&a){const o=ue(),i=o.findIndex(c=>c.id===n.id),l=o.findIndex(c=>c.id===a.id);if(i!==l){const c=o.slice();c.splice(l,0,...c.splice(i,1)),rt(c)}}},r=({draggable:n})=>n.node.classList.add("z-20");Z(async()=>{await te(()=>import("./registerProtocols.2e76af7b.js"),["assets/registerProtocols.2e76af7b.js","assets/index.104056db.js","assets/BareClient.06787bc0.js","assets/index.e65d7ba3.js","assets/index.f2f66a35.css","assets/url.624aedf1.js"]);const a=new URLSearchParams(window.location.search).get("url"),o=JSON.parse(localStorage.getItem("tabs")||"[]");if(a)new H(a,!0),window.history.replaceState({},document.title,"/");else if(o.length&&Re()["general.startup.openPreviousTabs"]){const i=parseInt(localStorage.getItem("activeTab")||"0");o.forEach(c=>{new H(c,!1)});const l=Array.from(tt())[i];l&&(l.focus=!0)}else new H("about:newTab",!0)});function t(){new H("about:newTab",!0)}return(()=>{const n=Pt.cloneNode(!0),a=n.firstChild,o=a.firstChild,i=o.firstChild;return h(a,k(We,{onDragEnd:e,onDragStart:r,collisionDetector:Fe,get children(){return[k(Ge,{}),k(qe,{}),k(Xe,{get ids(){return ue().map(l=>l.id)},get children(){return k(Ne,{get each(){return ue()},children:l=>{const c=Je(l.id);return k(Mt,{sortable:c,tab:l})}})}})]}}),o),i.$$click=t,n})()}Q(["click"]);const Nt=A('<div><div class="flex grow flex-row items-center"></div><div></div></div>'),Rt=A('<i class="fa-light fa-chevron-right"></i>'),Lt=A('<hr class="my-1">'),Bt=A('<div class="appmenu-separator-title my-1 select-none px-2 text-xs"></div>'),Vt=A("<div></div>"),Ht=A('<div class="relative bottom-0.5 flex h-10 cursor-default select-none flex-row items-center justify-center"><div class="absolute left-0 flex h-full w-8 items-center"><div class="popup-button flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-chevron-left"></i></div></div><div class="flex h-full flex-row items-center"><div class="flex h-full flex-row items-center justify-center font-bold"></div></div> </div>'),zt=A('<div class="popup absolute top-9 right-0.5 z-30 grid w-72 grid-cols-[1fr] rounded-lg border px-2 py-2 text-[0.9rem] shadow-lg"></div>'),Kt=A('<div class="fixed top-0 left-0 h-full w-full"></div>');function Ft(e){let r=X(null),t=[],n=(f,v,g,E=()=>{},w="")=>(()=>{const S=Nt.cloneNode(!0),j=S.firstChild,_=j.nextSibling;return S.$$click=p=>{f&&(E(p)??!0)&&x()},W(S,`popup-button flex h-8 w-full cursor-default select-none flex-row items-center rounded px-2 pt-[0.15rem] text-[12px] ${w}`),ae(S,"data-disabled",!f),h(j,v),h(_,g),S})(),a=Object.fromEntries(e.map(f=>[f,X(null)])),o=(f,v,g)=>n(f,v,Rt.cloneNode(!0),()=>(t.push(g),r[1](g),!1)),i=(f,v,g)=>n(f,v,Velocity.getKeybind(g)?.toString(),()=>{x(),Velocity.getKeybind(g)?.callback()}),l=(f=null)=>[Lt.cloneNode(!0),f!==null?(()=>{const v=Bt.cloneNode(!0);return h(v,f),v})():[]],c=(f,...v)=>(()=>{const g=Vt.cloneNode(!0);return h(g,v),U(()=>W(g,`col-start-1 row-start-1 flex h-full w-full flex-col ${r[0]()===f?"":"hidden"}`)),g})(),$=f=>[(()=>{const v=Ht.cloneNode(!0),g=v.firstChild,E=g.firstChild,w=g.nextSibling,S=w.firstChild;return E.$$click=()=>{t.pop(),r[1](t[t.length-1])},h(S,f),v})(),q(l)];function x(){r[1](null),t=["main"]}let d=(()=>{const f=zt.cloneNode(!0);return h(f,()=>Object.values(a).map(v=>v[0]())),f})();return{container:d,element:q((()=>{const f=q(()=>r[0]()!==null);return()=>f()?[(()=>{const v=Kt.cloneNode(!0);return v.$$pointerdown=()=>x(),v})(),d]:null})()),close:x,current:r,stack:t,submenus:a,Menu:c,MenuItem:n,KeybindMenuItem:i,SubmenuMenuItem:o,MenuSeparator:l,SubmenuHeader:$}}Q(["click","pointerdown"]);const Oe=A('<div class="grow"><div class="h-full w-full"></div></div>'),Ae=A('<div class="mb-0.5 mr-2 flex h-4 w-4 flex-row items-center"><img></div>'),Ee=A("<div></div>"),Ut=A('<div class="flex h-10 w-full items-center gap-2 p-2" id="browser-toolbar"><div class="flex items-center gap-1"><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-arrow-left mt-[2px]"></i></div><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-arrow-right mt-[2px]"></i></div><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i></i></div></div><div class="flex h-[32px] flex-1 items-center rounded text-sm" id="urlbar"><div class="mx-[2px] flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-magnifying-glass mt-[2px]"></i></div><input id="url_bar" autocomplete="off" class="flex h-full flex-1 items-center rounded bg-transparent text-sm leading-8 focus:outline-none"></div><div class="flex items-center gap-1"><a target="_blank" aria-label="View source code on GitHub." href="https://github.com/cohenerickson/Velocity" class="cursor-default"><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i class="fa-brands fa-github mt-[2px] text-sm"></i></div></a><div class="toolbarbutton-1 relative flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-bars mt-[2px] text-sm"></i></div></div></div>');function Wt(){function e(){M()?.loading()?M()?.stop():(M().search=!1,M()?.reload())}function r(){M().search=!1,M()?.goForward()}function t(){M().search=!1,M()?.goBack()}function n(_){_.addEventListener("keydown",p=>{p.key==="Enter"?(p.preventDefault(),_.value&&(M()?.navigate(_.value),M().search=!1,_.blur())):p.key==="Escape"?(M().search=!1,_.blur()):setTimeout(()=>M().search=_.value,0)})}let{element:a,container:o,close:i,current:l,stack:c,submenus:$,Menu:x,MenuItem:d,KeybindMenuItem:f,SubmenuMenuItem:v,MenuSeparator:g,SubmenuHeader:E}=Ft(["main","bookmarks","history","tools","help","recentTabs","recentWindows"]);N(()=>{$.main[1](x("main",f(!0,"New tab",{alias:"new_tab"}),f(!1,"New window",{alias:"new_window"}),g(),v(!0,"Bookmarks","bookmarks"),v(!0,"History","history"),f(!1,"Downloads",{alias:"open_downloads"}),d(!1,"Passwords",null,()=>{}),f(!1,"Add-ons and themes",{alias:"open_addons"}),g(),f(!1,"Print...",{alias:"print_page"}),f(!1,"Save page as...",{alias:"save_page"}),f(!1,"Find in page...",{alias:"search_page"}),d(!1,"Zoom",null,()=>{}),g(),d(!0,"Settings",null,()=>new H("about:preferences",!0)),v(!0,"More tools","tools"),v(!1,"Help","help"),g(),d(!1,"Quit",null,()=>{})))}),N(()=>{$.bookmarks[1](x("bookmarks",E("Bookmarks"),(()=>{const _=Oe.cloneNode(!0),p=_.firstChild;return h(p,()=>f(!0,"Bookmark current tab",{alias:"bookmark_tab"}),null),h(p,()=>d(!1,"Search bookmarks",null,()=>{}),null),h(p,()=>d(!0,q(()=>he()?"Hide bookmarks toolbar":"Show bookmarks toolbar"),null,()=>{je(!he())}),null),h(p,()=>g("Recent Bookmarks"),null),h(p,(()=>{const I=q(()=>ne().length>0);return()=>I()?ne().map(C=>d(!0,[(()=>{const T=Ae.cloneNode(!0),K=T.firstChild;return U(()=>ae(K,"src",C.icon)),T})(),(()=>{const T=Ee.cloneNode(!0);return h(T,()=>C.name),T})()],null,()=>new window.parent.Velocity.Tab(C.url,!0))):d(!1,"(Empty)",null,()=>{},"pointer-events-none")})(),null),_})(),g(),d(!0,"Manage Bookmarks",null,()=>new H("about:bookmarks",!0))))});const w=864e5,S=10;let j=X([]);return N(()=>{l[0]()==="history"&&st.history.get().then(_=>{let p=Date.now();j[1](_.filter(I=>Math.abs(p-I.timestamp)<=w).sort((I,C)=>C.timestamp-I.timestamp).slice(0,S))}),$.history[1](x("history",E("History"),(()=>{const _=Oe.cloneNode(!0),p=_.firstChild;return h(p,()=>v(!1,"Recently closed tabs","recentTabs"),null),h(p,()=>v(!1,"Recently closed windows","recentWindows"),null),h(p,()=>d(!1,"Restore previous session",null,()=>{}),null),h(p,g,null),h(p,()=>d(!1,"Clear Recent History",null,()=>{}),null),h(p,()=>g("Recent History"),null),h(p,(()=>{const I=q(()=>j[0]().length>0);return()=>I()?j[0]().map(C=>d(!0,[(()=>{const T=Ae.cloneNode(!0),K=T.firstChild;return U(()=>ae(K,"src",C.favicon)),T})(),(()=>{const T=Ee.cloneNode(!0);return h(T,()=>C.title),T})()],null,()=>new window.parent.Velocity.Tab(C.url,!0))):d(!1,"(Empty)",null,()=>{},"pointer-events-none")})(),null),_})(),g(),d(!0,"Manage History",null,()=>new H("about:history",!0))))}),N(()=>{$.tools[1](x("tools",E("More Tools"),d(!1,"Customize toolbar...",null,()=>{}),g("Browser tools"),f(!0,"Web Developer Tools",{alias:"open_devtools"}),d(!1,"Task Manager",null,()=>{}),d(!1,"Remote Debugging",null,()=>{}),d(!1,"Browser Console",null,()=>{}),d(!1,"Responsive Debugging",null,()=>{}),d(!1,"Eyedropper",null,()=>{}),f(!0,"Page Source",{alias:"view_source"}),d(!1,"Extensions for developers",null,()=>{})))}),(()=>{const _=Ut.cloneNode(!0),p=_.firstChild,I=p.firstChild,C=I.nextSibling,T=C.nextSibling,K=T.firstChild,J=p.nextSibling,ce=J.firstChild,F=ce.nextSibling,Ie=J.nextSibling,ve=Ie.firstChild,s=ve.nextSibling;s.firstChild,I.$$click=t,C.$$click=r,T.$$click=e;const u=n;return typeof u=="function"?we(u,F):n=F,s.$$click=b=>{o.contains(b.target)||(l[1](O=>O===null?"main":null),c.push("main"))},h(s,a,null),U(b=>{const O=`fa-light ${M()?.loading()?"fa-xmark":"fa-rotate-right"} mt-[2px]`,y=`Search with ${nt[Re()["search.defaults.searchEngine"]||"google"].name} or enter address`;return O!==b._v$&&W(K,b._v$=O),y!==b._v$2&&ae(F,"placeholder",b._v$2=y),b},{_v$:void 0,_v$2:void 0}),U(()=>F.value=M()?.search()!==!1?M()?.search():ct(M()?.url()||"")),_})()}Q(["click"]);const qt=A('<main class="flex h-full flex-col overflow-hidden"><div id="navigator-toolbox-background"><div id="navigator-toolbox"></div></div><main id="content" class="w-full flex-1 bg-white"></main></main>');function Zt(){return Z(async()=>{await te(()=>import("./registerSW.d2dc8ec2.js"),[]),await te(()=>import("./registerKeybinds.87cba062.js"),["assets/registerKeybinds.87cba062.js","assets/index.104056db.js","assets/BareClient.06787bc0.js","assets/index.e65d7ba3.js","assets/index.f2f66a35.css","assets/url.624aedf1.js"]),await te(()=>import("./addonStoreModifier.b6fcf732.js"),["assets/addonStoreModifier.b6fcf732.js","assets/index.104056db.js","assets/BareClient.06787bc0.js","assets/index.e65d7ba3.js","assets/index.f2f66a35.css","assets/url.624aedf1.js"]),await te(()=>import("./index.104056db.js").then(e=>e.i),["assets/index.104056db.js","assets/BareClient.06787bc0.js","assets/index.e65d7ba3.js","assets/index.f2f66a35.css","assets/url.624aedf1.js"]),window.addEventListener("keydown",lt),addEventListener("beforeunload",e=>{const r=JSON.parse(localStorage.getItem("preferences")||"{}");if(ue().length>1&&r["general.tabs.confirmBeforeClosing"])return e.preventDefault(),e.returnValue="Confirm before closing multiple tabs"},{capture:!0})}),(()=>{const e=qt.cloneNode(!0),r=e.firstChild,t=r.firstChild,n=r.nextSibling;return h(e,k(at,{children:"Velocity"}),r),h(t,k(jt,{}),null),h(t,k(Wt,{}),null),h(t,k(Ct,{}),null),h(e,k(it,{}),n),e})()}export{Zt as default};
